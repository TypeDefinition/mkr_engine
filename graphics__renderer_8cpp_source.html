<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mkr_engine: src/graphics/renderer/graphics_renderer.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mkr_engine
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_560415a5d2bc4999842279f4fc1debef.html">graphics</a></li><li class="navelem"><a class="el" href="dir_3be91838934054dc8688592bc1b65481.html">renderer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">graphics_renderer.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="graphics__renderer_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &lt;GL/glew.h&gt;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &lt;SDL2/SDL.h&gt;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;log/log.h&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="graphics__renderer_8h.html">graphics/renderer/graphics_renderer.h</a>&quot;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="lighting_8h.html">graphics/lighting/lighting.h</a>&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="asset__loader_8h.html">graphics/asset_loader/asset_loader.h</a>&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="forward__shader_8h.html">graphics/shader/forward_shader.h</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="geometry__shader_8h.html">graphics/shader/geometry_shader.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="light__shader_8h.html">graphics/shader/light_shader.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="post__proc__shader_8h.html">graphics/shader/post_proc_shader.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="skybox__shader_8h.html">graphics/shader/skybox_shader.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacemkr.html">mkr</a> {</div>
<div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="classmkr_1_1graphics__renderer.html#a50b03b55fb625d4f702b45e07aa43c1a">   14</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmkr_1_1graphics__renderer.html#a50b03b55fb625d4f702b45e07aa43c1a">graphics_renderer::init</a>() {</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;        <span class="comment">// Initialise SDL video subsystem.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;        <span class="keywordflow">if</span> (0 != SDL_InitSubSystem(SDL_INIT_VIDEO)) {</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;            <span class="keyword">const</span> std::string err_msg = <span class="stringliteral">&quot;SDL_INIT_VIDEO failed&quot;</span>;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;            mkr::log::error(err_msg);</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;            <span class="keywordflow">throw</span> std::runtime_error(err_msg);</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;        }</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;        <span class="comment">// Enable Multisampling</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;        SDL_SetHint(SDL_HINT_RENDER_SCALE_QUALITY, <span class="stringliteral">&quot;1&quot;</span>);</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;        <span class="comment">// Set Double Buffering</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <span class="comment">// Set OpenGL Version</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 4);</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 6);</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        <span class="keywordtype">int</span> majorVersion, minorVersion;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        SDL_GL_GetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, &amp;majorVersion);</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        SDL_GL_GetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, &amp;minorVersion);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        mkr::log::info(<span class="stringliteral">&quot;OpenGL Version: {}.{}&quot;</span>, majorVersion, minorVersion);</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        <span class="comment">// Create Window</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#ad8e80c6c3a0fd1a804208f41c32b51f5">app_window_</a> = std::make_unique&lt;app_window&gt;(<span class="stringliteral">&quot;mkr_engine&quot;</span>, <a class="code" href="classmkr_1_1graphics__renderer.html#abbcbdce247815fedf2ee671e88192a34">window_width_</a>, <a class="code" href="classmkr_1_1graphics__renderer.html#aea08e104db3efd807eb0a72f17fd7082">window_height_</a>, <a class="code" href="namespacemkr.html#a9655959a225d822da5e035327fbdb9bdadea58969a0734fca7a7a962adeb02da3">window_flags::none</a>);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        <span class="comment">// Initialise glew.</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        <span class="keywordflow">if</span> (GLEW_OK != glewInit()) {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;            <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;glewInit failed&quot;</span>);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        }</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a88efe9107656cd7385690e76236a6c4c">skybox_mesh_</a> = asset_loader::instance().make_skybox();</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a5a1d94db42b966794e8177cdf2515c48">screen_quad_</a> = asset_loader::instance().make_screen_quad();</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="comment">// Framebuffers</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#acf67a94cf4cf50424ca00617e4f63972">d_buff_</a> = std::make_unique&lt;default_buffer&gt;();</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#afa7c11f1aedc94b816a01e5ed5affeb2">g_buff_</a> = std::make_unique&lt;geometry_buffer&gt;(<a class="code" href="classmkr_1_1graphics__renderer.html#ad8e80c6c3a0fd1a804208f41c32b51f5">app_window_</a>-&gt;width(), <a class="code" href="classmkr_1_1graphics__renderer.html#ad8e80c6c3a0fd1a804208f41c32b51f5">app_window_</a>-&gt;height());</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a30cf0344b06a8fa815ca7599dd9c04c8">l_buff_</a> = std::make_unique&lt;light_buffer&gt;(<a class="code" href="classmkr_1_1graphics__renderer.html#ad8e80c6c3a0fd1a804208f41c32b51f5">app_window_</a>-&gt;width(), <a class="code" href="classmkr_1_1graphics__renderer.html#ad8e80c6c3a0fd1a804208f41c32b51f5">app_window_</a>-&gt;height());</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a901ae3acb341793861c91c306402b0d6">f_buff_</a> = std::make_unique&lt;forward_buffer&gt;(<a class="code" href="classmkr_1_1graphics__renderer.html#ad8e80c6c3a0fd1a804208f41c32b51f5">app_window_</a>-&gt;width(), <a class="code" href="classmkr_1_1graphics__renderer.html#ad8e80c6c3a0fd1a804208f41c32b51f5">app_window_</a>-&gt;height());</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#ab5f0f2465b820ba89404955dd822ac26">pp_buff_</a> = std::make_unique&lt;post_proc_buffer&gt;(<a class="code" href="classmkr_1_1graphics__renderer.html#ad8e80c6c3a0fd1a804208f41c32b51f5">app_window_</a>-&gt;width(), <a class="code" href="classmkr_1_1graphics__renderer.html#ad8e80c6c3a0fd1a804208f41c32b51f5">app_window_</a>-&gt;height());</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a434e6d0aa77db02218b1194438804022">s_buff_</a> = std::make_unique&lt;shadow_buffer&gt;(1024, 1024);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    }</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="classmkr_1_1graphics__renderer.html#a12b13a3af206a9d6ef1c3aed35910b0b">   56</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmkr_1_1graphics__renderer.html#a12b13a3af206a9d6ef1c3aed35910b0b">graphics_renderer::start</a>() {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        glEnable(GL_MULTISAMPLE);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        glEnable(GL_CULL_FACE);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        <span class="comment">// Depth</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        glEnable(GL_DEPTH_TEST);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        glDepthMask(GL_TRUE);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        glDepthFunc(GL_LESS);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="comment">// Blend</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        glEnable(GL_BLEND);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="comment">// Stencil</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="comment">// glEnable(GL_STENCIL_TEST);</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="comment">// glStencilMask(0xFF); // Each bit is written to the stencil buffer as-is.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="comment">// glDisable(GL_STENCIL_TEST);</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="comment">// glStencilMask(0x00);</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    }</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="classmkr_1_1graphics__renderer.html#a45bd8744927b027b02c65dfe28a5aff3">   76</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmkr_1_1graphics__renderer.html#a45bd8744927b027b02c65dfe28a5aff3">graphics_renderer::update</a>() {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="comment">// Clear framebuffer.</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#acf67a94cf4cf50424ca00617e4f63972">d_buff_</a>-&gt;clear_colour_all();</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#acf67a94cf4cf50424ca00617e4f63972">d_buff_</a>-&gt;clear_depth_stencil();</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="comment">// Render</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a9bfd2cde07bcbf5414359b7411fb66de">render</a>();</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="comment">// Swap buffer.</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#ad8e80c6c3a0fd1a804208f41c32b51f5">app_window_</a>-&gt;swap_buffers();</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    }</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="classmkr_1_1graphics__renderer.html#a99ec397776d7d22c2ad225d9c73e5e98">   88</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmkr_1_1graphics__renderer.html#a99ec397776d7d22c2ad225d9c73e5e98">graphics_renderer::exit</a>() {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        SDL_QuitSubSystem(SDL_INIT_VIDEO);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="classmkr_1_1graphics__renderer.html#a9bfd2cde07bcbf5414359b7411fb66de">   92</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmkr_1_1graphics__renderer.html#a9bfd2cde07bcbf5414359b7411fb66de">graphics_renderer::render</a>() {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="comment">// Render the scene once for every camera.</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keywordflow">while</span> (!<a class="code" href="classmkr_1_1graphics__renderer.html#a4ef270cde6f2290dc4fb80ebaa82a0bf">cameras_</a>.empty()) {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            <span class="keyword">auto</span>&amp; cam_data = <a class="code" href="classmkr_1_1graphics__renderer.html#a4ef270cde6f2290dc4fb80ebaa82a0bf">cameras_</a>.top();</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            <span class="keyword">auto</span>&amp; trans = cam_data.transform_;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            <span class="keyword">auto</span>&amp; cam = cam_data.camera_;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            <span class="comment">// View Matrix</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span> view_matrix = matrix_util::view_matrix(trans.position_, trans.forward_, trans.up_);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; view_forward = trans.forward_;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; view_up = trans.up_;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; view_right = -trans.left_;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            <span class="comment">// Projection Matrix</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <span class="keyword">const</span> matrix4x4 projection_matrix = (cam.mode_ == <a class="code" href="namespacemkr.html#aac2a3034ca6bac134bc3f4f42a31e076a75c6a0985bbb6ec81d99cbb52ff86c1d">projection_mode::perspective</a>)</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                                          ? matrix_util::perspective_matrix(cam.aspect_ratio_, cam.fov_, cam.near_plane_, cam.far_plane_)</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                                          : matrix_util::orthographic_matrix(cam.aspect_ratio_, cam.ortho_size_, cam.near_plane_, cam.far_plane_);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <span class="comment">// Render Passes</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <a class="code" href="classmkr_1_1graphics__renderer.html#aab27889f37c8c7661c5ade22f1b88e0b">geometry_pass</a>(view_matrix, projection_matrix);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            <a class="code" href="classmkr_1_1graphics__renderer.html#a63551283a98ea0db2ad282cbf4490bb0">light_pass</a>(view_matrix, view_forward, view_up, view_right);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <a class="code" href="classmkr_1_1graphics__renderer.html#ada5827840cc4636b061d20e144a5f806">forward_pass</a>(view_matrix, projection_matrix, view_forward, view_up, view_right, cam.skybox_);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <a class="code" href="classmkr_1_1graphics__renderer.html#aa579acfaef95fa81df495dfa3aad5973">post_proc_pass</a>(cam.near_plane_, cam.far_plane_);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="comment">// Blit to default framebuffer.</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <a class="code" href="classmkr_1_1graphics__renderer.html#ab5f0f2465b820ba89404955dd822ac26">pp_buff_</a>-&gt;set_read_colour_attachment(<a class="code" href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a09683270fc8785496b3d1d6423f18f77">pbuffer_composite</a>);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <a class="code" href="classmkr_1_1graphics__renderer.html#ab5f0f2465b820ba89404955dd822ac26">pp_buff_</a>-&gt;blit_to(<a class="code" href="classmkr_1_1graphics__renderer.html#acf67a94cf4cf50424ca00617e4f63972">d_buff_</a>.get(), <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, 0, 0, <a class="code" href="classmkr_1_1graphics__renderer.html#abbcbdce247815fedf2ee671e88192a34">window_width_</a>, <a class="code" href="classmkr_1_1graphics__renderer.html#aea08e104db3efd807eb0a72f17fd7082">window_height_</a>, 0, 0, <a class="code" href="classmkr_1_1graphics__renderer.html#abbcbdce247815fedf2ee671e88192a34">window_width_</a>, <a class="code" href="classmkr_1_1graphics__renderer.html#aea08e104db3efd807eb0a72f17fd7082">window_height_</a>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <a class="code" href="classmkr_1_1graphics__renderer.html#acf67a94cf4cf50424ca00617e4f63972">d_buff_</a>-&gt;bind();</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="comment">// Pop camera off the priority queue.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            <a class="code" href="classmkr_1_1graphics__renderer.html#a4ef270cde6f2290dc4fb80ebaa82a0bf">cameras_</a>.pop();</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="comment">// Clear objects for next frame.</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#abb759c34beb9aaecf69842a174b64ad0">lights_</a>.clear();</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a43a2edd7a4f1420853e119ca87e3c084">deferred_meshes_</a>.clear();</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a12e53247802cae5ebf814f6e2662c00c">forward_opaque_meshes_</a>.clear();</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a8533752d862c4729451ef8bd9807c525">forward_transparent_meshes_</a>.clear();</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="classmkr_1_1graphics__renderer.html#aab27889f37c8c7661c5ade22f1b88e0b">  132</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmkr_1_1graphics__renderer.html#aab27889f37c8c7661c5ade22f1b88e0b">graphics_renderer::geometry_pass</a>(<span class="keyword">const</span> matrix4x4&amp; _view_matrix, <span class="keyword">const</span> matrix4x4&amp; _projection_matrix) {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="comment">// IMPORTANT: Disable blending so that and fragment with 0 in its alpha channel does not get discarded.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        glDisable(GL_BLEND);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        glEnable(GL_DEPTH_TEST);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        glEnable(GL_STENCIL_TEST);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        glStencilMask(0xFFFFFFFF); <span class="comment">// Each bit is written to the stencil buffer as-is.</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        glStencilFunc(GL_ALWAYS, <a class="code" href="namespacemkr.html#a1af81b2d0e3cf9b89ab132aaeea299e2ac8985da789fcecc895354b4bcc89eb79">stencil_opaque</a>, 0xFFFFFFFF);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        glStencilOp(GL_KEEP, GL_KEEP, GL_REPLACE);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#afa7c11f1aedc94b816a01e5ed5affeb2">g_buff_</a>-&gt;bind();</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#afa7c11f1aedc94b816a01e5ed5affeb2">g_buff_</a>-&gt;set_draw_colour_attachment_all();</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#afa7c11f1aedc94b816a01e5ed5affeb2">g_buff_</a>-&gt;clear_colour_all();</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#afa7c11f1aedc94b816a01e5ed5affeb2">g_buff_</a>-&gt;clear_depth_stencil();</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="comment">// Use shader.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <a class="code" href="classmkr_1_1material.html#ad2f7bdd6e381175da6aca200fb726c14">material::geometry_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a718cfdf922d5d469812bbff3a4738221">use</a>();</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keyword">auto</span> view_projection_matrix = _projection_matrix * _view_matrix;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; material_iter : <a class="code" href="classmkr_1_1graphics__renderer.html#a43a2edd7a4f1420853e119ca87e3c084">deferred_meshes_</a>) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            <span class="keyword">auto</span> material_ptr = material_iter.first;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            <span class="comment">// Bind textures.</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            <span class="keywordflow">if</span> (material_ptr-&gt;texture_diffuse_) { material_ptr-&gt;texture_diffuse_-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a279c221a440a6e199736a992a2e13873">texture_unit::texture_diffuse</a>); }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <span class="keywordflow">if</span> (material_ptr-&gt;texture_normal_) { material_ptr-&gt;texture_normal_-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a2e6f41bb29037dc80504b943a03a37f5">texture_unit::texture_normal</a>); }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            <span class="keywordflow">if</span> (material_ptr-&gt;texture_specular_) { material_ptr-&gt;texture_specular_-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a77f77f76d87adf102db0c97761a32f89">texture_unit::texture_specular</a>); }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <span class="keywordflow">if</span> (material_ptr-&gt;texture_gloss_) { material_ptr-&gt;texture_gloss_-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a28836e1906c467f91fe721f876196f79">texture_unit::texture_gloss</a>); }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <span class="keywordflow">if</span> (material_ptr-&gt;texture_displacement_) { material_ptr-&gt;texture_displacement_-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a713a31f5dc6be65e75247060dc49742e">texture_unit::texture_displacement</a>); }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <span class="comment">// Vertex shader uniforms.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <a class="code" href="classmkr_1_1material.html#ad2f7bdd6e381175da6aca200fb726c14">material::geometry_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(geometry_shader::uniform::u_view_matrix, <span class="keyword">false</span>, _view_matrix);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            <a class="code" href="classmkr_1_1material.html#ad2f7bdd6e381175da6aca200fb726c14">material::geometry_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(geometry_shader::uniform::u_projection_matrix, <span class="keyword">false</span>, _projection_matrix);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <a class="code" href="classmkr_1_1material.html#ad2f7bdd6e381175da6aca200fb726c14">material::geometry_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(geometry_shader::uniform::u_view_projection_matrix, <span class="keyword">false</span>, view_projection_matrix);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <a class="code" href="classmkr_1_1material.html#ad2f7bdd6e381175da6aca200fb726c14">material::geometry_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(geometry_shader::uniform::u_texture_offset, material_ptr-&gt;texture_offset_);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <a class="code" href="classmkr_1_1material.html#ad2f7bdd6e381175da6aca200fb726c14">material::geometry_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(geometry_shader::uniform::u_texture_scale, material_ptr-&gt;texture_scale_);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <span class="comment">// Fragment shader uniforms.</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            <a class="code" href="classmkr_1_1material.html#ad2f7bdd6e381175da6aca200fb726c14">material::geometry_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(geometry_shader::uniform::u_texture_diffuse_enabled, material_ptr-&gt;texture_diffuse_ != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <a class="code" href="classmkr_1_1material.html#ad2f7bdd6e381175da6aca200fb726c14">material::geometry_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(geometry_shader::uniform::u_texture_normal_enabled, material_ptr-&gt;texture_normal_ != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <a class="code" href="classmkr_1_1material.html#ad2f7bdd6e381175da6aca200fb726c14">material::geometry_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(geometry_shader::uniform::u_texture_specular_enabled, material_ptr-&gt;texture_specular_ != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <a class="code" href="classmkr_1_1material.html#ad2f7bdd6e381175da6aca200fb726c14">material::geometry_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(geometry_shader::uniform::u_texture_gloss_enabled, material_ptr-&gt;texture_gloss_ != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <a class="code" href="classmkr_1_1material.html#ad2f7bdd6e381175da6aca200fb726c14">material::geometry_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(geometry_shader::uniform::u_texture_displacement_enabled, material_ptr-&gt;texture_displacement_ != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            <a class="code" href="classmkr_1_1material.html#ad2f7bdd6e381175da6aca200fb726c14">material::geometry_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(geometry_shader::uniform::u_diffuse_colour, material_ptr-&gt;diffuse_colour_);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <a class="code" href="classmkr_1_1material.html#ad2f7bdd6e381175da6aca200fb726c14">material::geometry_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(geometry_shader::uniform::u_gloss, material_ptr-&gt;gloss_);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <a class="code" href="classmkr_1_1material.html#ad2f7bdd6e381175da6aca200fb726c14">material::geometry_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(geometry_shader::uniform::u_displacement_scale, material_ptr-&gt;displacement_scale_);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="comment">// Draw to screen.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; mesh_iter : material_iter.second) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                <span class="keyword">auto</span> mesh_ptr = mesh_iter.first;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                <span class="keyword">auto</span>&amp; model_matrices = mesh_iter.second;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                std::vector&lt;mesh_instance_data&gt; batch;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; model_matrix : model_matrices) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                    <span class="keyword">const</span> <span class="keyword">auto</span> model_view_matrix = _view_matrix * model_matrix;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                    <span class="keyword">const</span> <span class="keyword">auto</span> model_view_inverse = matrix_util::inverse_matrix(model_view_matrix).value_or(matrix4x4::identity());</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                    <span class="keyword">const</span> <span class="keyword">auto</span> normal_matrix = matrix_util::minor_matrix(matrix_util::transpose_matrix(model_view_inverse), 3, 3);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                    batch.push_back({model_matrix, normal_matrix});</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                mesh_ptr-&gt;bind();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                mesh_ptr-&gt;set_instance_data(batch);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                glDrawElementsInstanced(GL_TRIANGLES, mesh_ptr-&gt;num_indices(), GL_UNSIGNED_INT, 0, model_matrices.size());</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="classmkr_1_1graphics__renderer.html#a63551283a98ea0db2ad282cbf4490bb0">  198</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmkr_1_1graphics__renderer.html#a63551283a98ea0db2ad282cbf4490bb0">graphics_renderer::light_pass</a>(<span class="keyword">const</span> matrix4x4&amp; _view_matrix, <span class="keyword">const</span> vector3&amp; _view_forward, <span class="keyword">const</span> vector3&amp; _view_up, <span class="keyword">const</span> vector3&amp; _view_right) {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        glDisable(GL_BLEND);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        glDisable(GL_DEPTH_TEST);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        glDisable(GL_STENCIL_TEST);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a30cf0344b06a8fa815ca7599dd9c04c8">l_buff_</a>-&gt;bind();</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a30cf0344b06a8fa815ca7599dd9c04c8">l_buff_</a>-&gt;set_draw_colour_attachment_all();</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a30cf0344b06a8fa815ca7599dd9c04c8">l_buff_</a>-&gt;clear_colour_all();</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#afa7c11f1aedc94b816a01e5ed5affeb2">g_buff_</a>-&gt;get_colour_attachment(<a class="code" href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a83d07773d38cd79b12eb3e2d1c621463">gbuffer_position</a>)-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1ab5e15f29cadab8f1f8081341bff5f3f0">texture_unit::texture_frag_position</a>);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#afa7c11f1aedc94b816a01e5ed5affeb2">g_buff_</a>-&gt;get_colour_attachment(<a class="code" href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4aa42debe4b00837d3a71b6bc6876ec708">gbuffer_normal</a>)-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a95f748d4b1ef941454f52af4ecee820b">texture_unit::texture_frag_normal</a>);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#afa7c11f1aedc94b816a01e5ed5affeb2">g_buff_</a>-&gt;get_colour_attachment(<a class="code" href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4ab7026ff7791b1f055d69425ec3395b83">gbuffer_albedo</a>)-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1afe46177cc5a88a581cf68ce5317c7be2">texture_unit::texture_frag_diffuse</a>);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#afa7c11f1aedc94b816a01e5ed5affeb2">g_buff_</a>-&gt;get_colour_attachment(<a class="code" href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a1c4a3e09a2fbb083b89cd4df68451647">gbuffer_specular</a>)-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a78ab070005550fa9389ab539d705e8e6">texture_unit::texture_frag_specular</a>);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#afa7c11f1aedc94b816a01e5ed5affeb2">g_buff_</a>-&gt;get_colour_attachment(<a class="code" href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a6b3cd312d927939d390e646d921c65b9">gbuffer_gloss</a>)-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a31365efb3f17ef94ebed82d6d78d235c">texture_unit::texture_frag_gloss</a>);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="comment">// Use shader.</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <a class="code" href="classmkr_1_1material.html#a61d1dd0c97915c693a1c1a284b748060">material::light_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a718cfdf922d5d469812bbff3a4738221">use</a>();</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="comment">// Lights.</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <a class="code" href="classmkr_1_1material.html#a61d1dd0c97915c693a1c1a284b748060">material::light_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(light_shader::uniform::u_ambient_light, <a class="code" href="classmkr_1_1lighting.html#a05fdf0bf39258c6d1bde9dde1d3a145d">lighting::ambient_light_</a>);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="comment">// Bind mesh.</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a5a1d94db42b966794e8177cdf2515c48">screen_quad_</a>-&gt;bind();</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a5a1d94db42b966794e8177cdf2515c48">screen_quad_</a>-&gt;set_instance_data({{matrix4x4::identity(), matrix3x3::identity()}});</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="comment">// If there are more lights than we can render in a single lighting pass, split it into multiple passes.</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> num_pass = (<a class="code" href="classmkr_1_1graphics__renderer.html#abb759c34beb9aaecf69842a174b64ad0">lights_</a>.size() / <a class="code" href="classmkr_1_1light__shader.html#a4a046dee57a8f755df8c93f3be82d997">light_shader::max_lights</a>) + 1;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> p = 0; p &lt; num_pass; ++p) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <span class="comment">// Swap the diffuse and specular buffers.</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <a class="code" href="classmkr_1_1graphics__renderer.html#a30cf0344b06a8fa815ca7599dd9c04c8">l_buff_</a>-&gt;get_colour_attachment(<a class="code" href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a7cd7b2bad72491e5c847abe7f734acc5">lbuffer_diffuse</a>)-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a9bf1291d9a8e08e853c51eb192817f86">texture_unit::texture_light_diffuse</a>);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            <a class="code" href="classmkr_1_1graphics__renderer.html#a30cf0344b06a8fa815ca7599dd9c04c8">l_buff_</a>-&gt;get_colour_attachment(<a class="code" href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a6fda5fa8094b5bc80468b6dc3754498d">lbuffer_specular</a>)-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a375ec01642107a6178872e8055cc66ad">texture_unit::texture_light_specular</a>);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            <a class="code" href="classmkr_1_1graphics__renderer.html#a30cf0344b06a8fa815ca7599dd9c04c8">l_buff_</a>-&gt;swap_buffers();</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <span class="keywordtype">size_t</span> <a class="code" href="classmkr_1_1graphics__renderer.html#a12b13a3af206a9d6ef1c3aed35910b0b">start</a> = <a class="code" href="classmkr_1_1light__shader.html#a4a046dee57a8f755df8c93f3be82d997">light_shader::max_lights</a> * p;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <span class="keywordtype">size_t</span> end = maths_util::min&lt;size_t&gt;(<a class="code" href="classmkr_1_1graphics__renderer.html#a12b13a3af206a9d6ef1c3aed35910b0b">start</a> + <a class="code" href="classmkr_1_1light__shader.html#a4a046dee57a8f755df8c93f3be82d997">light_shader::max_lights</a>, <a class="code" href="classmkr_1_1graphics__renderer.html#abb759c34beb9aaecf69842a174b64ad0">lights_</a>.size());</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <a class="code" href="classmkr_1_1material.html#a61d1dd0c97915c693a1c1a284b748060">material::light_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(light_shader::uniform::u_num_lights, (<span class="keywordtype">int</span>) (end - <a class="code" href="classmkr_1_1graphics__renderer.html#a12b13a3af206a9d6ef1c3aed35910b0b">start</a>));</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <span class="keywordtype">size_t</span> curr = <a class="code" href="classmkr_1_1graphics__renderer.html#a12b13a3af206a9d6ef1c3aed35910b0b">start</a>; <span class="comment">// Index in C++.</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <span class="keywordtype">size_t</span> index = 0; <span class="comment">// Index in shader.</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="keywordflow">while</span> (curr &lt; end) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                <span class="keyword">const</span> <span class="keyword">auto</span>&amp; t = <a class="code" href="classmkr_1_1graphics__renderer.html#abb759c34beb9aaecf69842a174b64ad0">lights_</a>[curr].transform_;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                <span class="keyword">const</span> <span class="keyword">auto</span>&amp; l = <a class="code" href="classmkr_1_1graphics__renderer.html#abb759c34beb9aaecf69842a174b64ad0">lights_</a>[curr].light_;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                <span class="keyword">auto</span> position_matrix = _view_matrix * t.transform_;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                <span class="keyword">auto</span> position_camera_space = vector3{position_matrix[3][0], position_matrix[3][1], position_matrix[3][2]};</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                vector3 direction_vector = vector3{_view_right.dot(t.forward_), _view_up.dot(t.forward_), _view_forward.dot(t.forward_)}.normalised();</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                <a class="code" href="classmkr_1_1material.html#a61d1dd0c97915c693a1c1a284b748060">material::light_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(index + light_shader::uniform::u_light_mode0, l.get_mode());</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                <a class="code" href="classmkr_1_1material.html#a61d1dd0c97915c693a1c1a284b748060">material::light_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(index + light_shader::uniform::u_light_power0, l.get_power());</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                <a class="code" href="classmkr_1_1material.html#a61d1dd0c97915c693a1c1a284b748060">material::light_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(index + light_shader::uniform::u_light_colour0, l.get_colour());</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                <a class="code" href="classmkr_1_1material.html#a61d1dd0c97915c693a1c1a284b748060">material::light_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(index + light_shader::uniform::u_light_attenuation_constant0, l.get_attenuation_constant());</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                <a class="code" href="classmkr_1_1material.html#a61d1dd0c97915c693a1c1a284b748060">material::light_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(index + light_shader::uniform::u_light_attenuation_linear0, l.get_attenuation_linear());</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                <a class="code" href="classmkr_1_1material.html#a61d1dd0c97915c693a1c1a284b748060">material::light_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(index + light_shader::uniform::u_light_attenuation_quadratic0, l.get_attenuation_quadratic());</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                <a class="code" href="classmkr_1_1material.html#a61d1dd0c97915c693a1c1a284b748060">material::light_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(index + light_shader::uniform::u_light_spotlight_inner_cosine0, l.get_spotlight_inner_consine());</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                <a class="code" href="classmkr_1_1material.html#a61d1dd0c97915c693a1c1a284b748060">material::light_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(index + light_shader::uniform::u_light_spotlight_outer_cosine0, l.get_spotlight_outer_consine());</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                <a class="code" href="classmkr_1_1material.html#a61d1dd0c97915c693a1c1a284b748060">material::light_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(index + light_shader::uniform::u_light_position_camera_space0, position_camera_space);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                <a class="code" href="classmkr_1_1material.html#a61d1dd0c97915c693a1c1a284b748060">material::light_shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(index + light_shader::uniform::u_light_direction_camera_space0, direction_vector);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                ++curr;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                ++index;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <span class="comment">// Draw.</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            glDrawElementsInstanced(GL_TRIANGLES, <a class="code" href="classmkr_1_1graphics__renderer.html#a5a1d94db42b966794e8177cdf2515c48">screen_quad_</a>-&gt;num_indices(), GL_UNSIGNED_INT, 0, 1);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="classmkr_1_1graphics__renderer.html#ada5827840cc4636b061d20e144a5f806">  265</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmkr_1_1graphics__renderer.html#ada5827840cc4636b061d20e144a5f806">graphics_renderer::forward_pass</a>(<span class="keyword">const</span> matrix4x4&amp; _view_matrix, <span class="keyword">const</span> matrix4x4&amp; _projection_matrix, <span class="keyword">const</span> vector3&amp; _view_forward, <span class="keyword">const</span> vector3&amp; _view_up, <span class="keyword">const</span> vector3&amp; _view_right, <span class="keyword">const</span> <a class="code" href="classmkr_1_1skybox.html">skybox</a>&amp; _skybox) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="comment">// Render opaque objects.</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        glDisable(GL_BLEND);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        glEnable(GL_DEPTH_TEST);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        glDepthMask(GL_TRUE);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        glDepthFunc(GL_LESS);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        glEnable(GL_STENCIL_TEST);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        glStencilMask(0xFFFFFFFF); <span class="comment">// Each bit is written to the stencil buffer as-is.</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        glStencilFunc(GL_ALWAYS, <a class="code" href="namespacemkr.html#a1af81b2d0e3cf9b89ab132aaeea299e2ac8985da789fcecc895354b4bcc89eb79">stencil_opaque</a>, 0xFFFFFFFF);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        glStencilOp(GL_KEEP, GL_KEEP, GL_REPLACE);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a901ae3acb341793861c91c306402b0d6">f_buff_</a>-&gt;bind();</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a901ae3acb341793861c91c306402b0d6">f_buff_</a>-&gt;set_draw_colour_attachment_all();</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a901ae3acb341793861c91c306402b0d6">f_buff_</a>-&gt;clear_colour_all();</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a30cf0344b06a8fa815ca7599dd9c04c8">l_buff_</a>-&gt;set_read_colour_attachment(<a class="code" href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a4cf52d184d8b5a75dfadfe36bbfb2b0f">lbuffer_composite</a>);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a901ae3acb341793861c91c306402b0d6">f_buff_</a>-&gt;set_draw_colour_attachment(<a class="code" href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4aa550835bf5853b4f95b6845f880df643">fbuffer_composite</a>);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a30cf0344b06a8fa815ca7599dd9c04c8">l_buff_</a>-&gt;blit_to(<a class="code" href="classmkr_1_1graphics__renderer.html#a901ae3acb341793861c91c306402b0d6">f_buff_</a>.get(), <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, 0, 0, 1920, 1080, 0, 0, 1920, 1080);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#afa7c11f1aedc94b816a01e5ed5affeb2">g_buff_</a>-&gt;set_read_colour_attachment(<a class="code" href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a83d07773d38cd79b12eb3e2d1c621463">gbuffer_position</a>);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a901ae3acb341793861c91c306402b0d6">f_buff_</a>-&gt;set_draw_colour_attachment(<a class="code" href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a7250f587684f1009f64edc865a4c9a96">fbuffer_position</a>);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#afa7c11f1aedc94b816a01e5ed5affeb2">g_buff_</a>-&gt;blit_to(<a class="code" href="classmkr_1_1graphics__renderer.html#a901ae3acb341793861c91c306402b0d6">f_buff_</a>.get(), <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, 0, 0, 1920, 1080, 0, 0, 1920, 1080);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#afa7c11f1aedc94b816a01e5ed5affeb2">g_buff_</a>-&gt;set_read_colour_attachment(<a class="code" href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4aa42debe4b00837d3a71b6bc6876ec708">gbuffer_normal</a>);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a901ae3acb341793861c91c306402b0d6">f_buff_</a>-&gt;set_draw_colour_attachment(<a class="code" href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a45c175a7e6bf988cc096e96b6e28d317">fbuffer_normal</a>);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#afa7c11f1aedc94b816a01e5ed5affeb2">g_buff_</a>-&gt;blit_to(<a class="code" href="classmkr_1_1graphics__renderer.html#a901ae3acb341793861c91c306402b0d6">f_buff_</a>.get(), <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, 0, 0, 1920, 1080, 0, 0, 1920, 1080);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#afa7c11f1aedc94b816a01e5ed5affeb2">g_buff_</a>-&gt;blit_to(<a class="code" href="classmkr_1_1graphics__renderer.html#a901ae3acb341793861c91c306402b0d6">f_buff_</a>.get(), <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, 0, 0, 1920, 1080, 0, 0, 1920, 1080);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a901ae3acb341793861c91c306402b0d6">f_buff_</a>-&gt;set_draw_colour_attachment_all();</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keyword">auto</span> view_projection_matrix = _projection_matrix * _view_matrix;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; material_iter : <a class="code" href="classmkr_1_1graphics__renderer.html#a12e53247802cae5ebf814f6e2662c00c">forward_opaque_meshes_</a>) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="keyword">auto</span> material_ptr = material_iter.first;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="keyword">auto</span> shader = material_ptr-&gt;forward_shader_;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            shader-&gt;use();</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="comment">// Bind textures.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <span class="keywordflow">if</span> (material_ptr-&gt;texture_diffuse_) { material_ptr-&gt;texture_diffuse_-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a279c221a440a6e199736a992a2e13873">texture_unit::texture_diffuse</a>); }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="keywordflow">if</span> (material_ptr-&gt;texture_normal_) { material_ptr-&gt;texture_normal_-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a2e6f41bb29037dc80504b943a03a37f5">texture_unit::texture_normal</a>); }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <span class="keywordflow">if</span> (material_ptr-&gt;texture_specular_) { material_ptr-&gt;texture_specular_-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a77f77f76d87adf102db0c97761a32f89">texture_unit::texture_specular</a>); }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            <span class="keywordflow">if</span> (material_ptr-&gt;texture_gloss_) { material_ptr-&gt;texture_gloss_-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a28836e1906c467f91fe721f876196f79">texture_unit::texture_gloss</a>); }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="keywordflow">if</span> (material_ptr-&gt;texture_displacement_) { material_ptr-&gt;texture_displacement_-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a713a31f5dc6be65e75247060dc49742e">texture_unit::texture_displacement</a>); }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="comment">// Vertex shader uniforms.</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            shader-&gt;set_uniform(forward_shader::uniform::u_view_matrix, <span class="keyword">false</span>, _view_matrix);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            shader-&gt;set_uniform(forward_shader::uniform::u_projection_matrix, <span class="keyword">false</span>, _projection_matrix);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            shader-&gt;set_uniform(forward_shader::uniform::u_view_projection_matrix, <span class="keyword">false</span>, view_projection_matrix);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            shader-&gt;set_uniform(forward_shader::uniform::u_texture_offset, material_ptr-&gt;texture_offset_);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            shader-&gt;set_uniform(forward_shader::uniform::u_texture_scale, material_ptr-&gt;texture_scale_);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            <span class="comment">// Fragment shader uniforms.</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            shader-&gt;set_uniform(forward_shader::uniform::u_texture_diffuse_enabled, material_ptr-&gt;texture_diffuse_ != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            shader-&gt;set_uniform(forward_shader::uniform::u_texture_normal_enabled, material_ptr-&gt;texture_normal_ != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            shader-&gt;set_uniform(forward_shader::uniform::u_texture_specular_enabled, material_ptr-&gt;texture_specular_ != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            shader-&gt;set_uniform(forward_shader::uniform::u_texture_gloss_enabled, material_ptr-&gt;texture_gloss_ != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            shader-&gt;set_uniform(forward_shader::uniform::u_texture_displacement_enabled, material_ptr-&gt;texture_displacement_ != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            shader-&gt;set_uniform(forward_shader::uniform::u_ambient_light, <a class="code" href="classmkr_1_1lighting.html#a05fdf0bf39258c6d1bde9dde1d3a145d">lighting::ambient_light_</a>);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            shader-&gt;set_uniform(forward_shader::uniform::u_diffuse_colour, material_ptr-&gt;diffuse_colour_);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            shader-&gt;set_uniform(forward_shader::uniform::u_gloss, material_ptr-&gt;gloss_);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            shader-&gt;set_uniform(forward_shader::uniform::u_displacement_scale, material_ptr-&gt;displacement_scale_);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            <span class="keyword">const</span> int32_t num_lights = maths_util::min&lt;int32_t&gt;(<a class="code" href="classmkr_1_1graphics__renderer.html#abb759c34beb9aaecf69842a174b64ad0">lights_</a>.size(), <a class="code" href="classmkr_1_1forward__shader.html#a2231c6c49254df374d3247ea38d2fd86">forward_shader::max_lights</a>);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            shader-&gt;set_uniform(forward_shader::uniform::u_num_lights, num_lights);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; num_lights; ++i) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                <span class="keyword">const</span> <span class="keyword">auto</span>&amp; t = <a class="code" href="classmkr_1_1graphics__renderer.html#abb759c34beb9aaecf69842a174b64ad0">lights_</a>[i].transform_;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                <span class="keyword">const</span> <span class="keyword">auto</span>&amp; l = <a class="code" href="classmkr_1_1graphics__renderer.html#abb759c34beb9aaecf69842a174b64ad0">lights_</a>[i].light_;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                <span class="keyword">auto</span> position_matrix = _view_matrix * t.transform_;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                <span class="keyword">auto</span> position_camera_space = vector3{position_matrix[3][0], position_matrix[3][1], position_matrix[3][2]};</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                vector3 direction_vector = vector3{_view_right.dot(t.forward_), _view_up.dot(t.forward_), _view_forward.dot(t.forward_)}.normalised();</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                shader-&gt;set_uniform(i + forward_shader::uniform::u_light_mode0, l.get_mode());</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                shader-&gt;set_uniform(i + forward_shader::uniform::u_light_power0, l.get_power());</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                shader-&gt;set_uniform(i + forward_shader::uniform::u_light_colour0, l.get_colour());</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                shader-&gt;set_uniform(i + forward_shader::uniform::u_light_attenuation_constant0, l.get_attenuation_constant());</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                shader-&gt;set_uniform(i + forward_shader::uniform::u_light_attenuation_linear0, l.get_attenuation_linear());</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                shader-&gt;set_uniform(i + forward_shader::uniform::u_light_attenuation_quadratic0, l.get_attenuation_quadratic());</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                shader-&gt;set_uniform(i + forward_shader::uniform::u_light_spotlight_inner_cosine0, l.get_spotlight_inner_consine());</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                shader-&gt;set_uniform(i + forward_shader::uniform::u_light_spotlight_outer_cosine0, l.get_spotlight_outer_consine());</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                shader-&gt;set_uniform(i + forward_shader::uniform::u_light_position_camera_space0, position_camera_space);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                shader-&gt;set_uniform(i + forward_shader::uniform::u_light_direction_camera_space0, direction_vector);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <span class="comment">// Draw to screen.</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; mesh_iter : material_iter.second) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                <span class="keyword">auto</span> mesh_ptr = mesh_iter.first;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                <span class="keyword">auto</span>&amp; model_matrices = mesh_iter.second;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                std::vector&lt;mesh_instance_data&gt; batch;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; model_matrix : model_matrices) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                    <span class="keyword">const</span> <span class="keyword">auto</span> model_view_matrix = _view_matrix * model_matrix;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                    <span class="keyword">const</span> <span class="keyword">auto</span> model_view_inverse = matrix_util::inverse_matrix(model_view_matrix).value_or(matrix4x4::identity());</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                    <span class="keyword">const</span> <span class="keyword">auto</span> normal_matrix = matrix_util::minor_matrix(matrix_util::transpose_matrix(model_view_inverse), 3, 3);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                    batch.push_back({model_matrix, normal_matrix});</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                }</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                mesh_ptr-&gt;bind();</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                mesh_ptr-&gt;set_instance_data(batch);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                glDrawElementsInstanced(GL_TRIANGLES, mesh_ptr-&gt;num_indices(), GL_UNSIGNED_INT, 0, model_matrices.size());</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="comment">// Render skybox.</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="comment">// Even though the skybox shader only writes to one colour attachment, we have to disable writing to the other colour attachments, otherwise they will have some undefined values written to them.</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="comment">// As long as a colour attachment to set to be drawn to it, some value will be written to it no matter what, even if the shader does not specify.</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="comment">// For the case of my computer, it will cause the values in fbuffer_composite to also be written to the other colour attachments.</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="comment">// [https://stackoverflow.com/questions/39545966/opengl-3-0-framebuffer-outputting-to-attachments-without-me-specifying]</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a901ae3acb341793861c91c306402b0d6">f_buff_</a>-&gt;set_draw_colour_attachment(<a class="code" href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4aa550835bf5853b4f95b6845f880df643">fbuffer_composite</a>);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keywordflow">if</span> (_skybox.<a class="code" href="classmkr_1_1skybox.html#a1000d3b9dd0012fc18c6f0ea77c07dde">shader_</a>) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            glDisable(GL_DEPTH_TEST);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            glEnable(GL_STENCIL_TEST);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            glStencilMask(0xFFFFFFFF); <span class="comment">// Each bit is written to the stencil buffer as-is.</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            glStencilFunc(GL_NOTEQUAL, <a class="code" href="namespacemkr.html#a1af81b2d0e3cf9b89ab132aaeea299e2ac8985da789fcecc895354b4bcc89eb79">stencil_opaque</a>, 0xFFFFFFFF);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            glStencilOp(GL_KEEP, GL_KEEP, GL_KEEP);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <span class="keywordflow">if</span> (_skybox.<a class="code" href="classmkr_1_1skybox.html#aace00fd4d01a90c747f0962fba8a2195">texture_</a>) { _skybox.<a class="code" href="classmkr_1_1skybox.html#aace00fd4d01a90c747f0962fba8a2195">texture_</a>-&gt;<a class="code" href="classmkr_1_1texture.html#a5e23fdd61c8a395729f86e2d8a7660e5">bind</a>(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a3e73636b1d3567f3e4554e27f48c2e4c">texture_unit::texture_skybox</a>); }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            _skybox.<a class="code" href="classmkr_1_1skybox.html#a1000d3b9dd0012fc18c6f0ea77c07dde">shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a718cfdf922d5d469812bbff3a4738221">use</a>();</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            _skybox.<a class="code" href="classmkr_1_1skybox.html#a1000d3b9dd0012fc18c6f0ea77c07dde">shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(skybox_shader::uniform::u_texture_skybox_enabled, _skybox.<a class="code" href="classmkr_1_1skybox.html#aace00fd4d01a90c747f0962fba8a2195">texture_</a> != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            _skybox.<a class="code" href="classmkr_1_1skybox.html#a1000d3b9dd0012fc18c6f0ea77c07dde">shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(skybox_shader::uniform::u_skybox_colour, _skybox.<a class="code" href="classmkr_1_1skybox.html#a0f3f77ded1dacf0a0f6e116c9ce08a9d">colour_</a>);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            _skybox.<a class="code" href="classmkr_1_1skybox.html#a1000d3b9dd0012fc18c6f0ea77c07dde">shader_</a>-&gt;<a class="code" href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">set_uniform</a>(skybox_shader::uniform::u_view_projection_matrix, <span class="keyword">false</span>, _projection_matrix * matrix_util::view_matrix(vector3::zero, _view_forward, _view_up));</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            <a class="code" href="classmkr_1_1graphics__renderer.html#a88efe9107656cd7385690e76236a6c4c">skybox_mesh_</a>-&gt;bind();</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <a class="code" href="classmkr_1_1graphics__renderer.html#a88efe9107656cd7385690e76236a6c4c">skybox_mesh_</a>-&gt;set_instance_data({{matrix4x4::identity(), matrix3x3::identity()}});</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            glDrawElementsInstanced(GL_TRIANGLES, <a class="code" href="classmkr_1_1graphics__renderer.html#a88efe9107656cd7385690e76236a6c4c">skybox_mesh_</a>-&gt;num_indices(), GL_UNSIGNED_INT, 0, 1);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="comment">// Render transparent objects.</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a901ae3acb341793861c91c306402b0d6">f_buff_</a>-&gt;set_draw_colour_attachment_all();</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        glEnable(GL_BLEND);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno"><a class="line" href="classmkr_1_1graphics__renderer.html#aa579acfaef95fa81df495dfa3aad5973">  397</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmkr_1_1graphics__renderer.html#aa579acfaef95fa81df495dfa3aad5973">graphics_renderer::post_proc_pass</a>(<span class="keywordtype">float</span> _near, <span class="keywordtype">float</span> _far) {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        glDisable(GL_BLEND);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        glDisable(GL_DEPTH_TEST);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        glDisable(GL_STENCIL_TEST);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#ab5f0f2465b820ba89404955dd822ac26">pp_buff_</a>-&gt;bind();</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#ab5f0f2465b820ba89404955dd822ac26">pp_buff_</a>-&gt;set_draw_colour_attachment_all();</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#ab5f0f2465b820ba89404955dd822ac26">pp_buff_</a>-&gt;clear_colour_all();</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a901ae3acb341793861c91c306402b0d6">f_buff_</a>-&gt;set_read_colour_attachment(<a class="code" href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4aa550835bf5853b4f95b6845f880df643">fbuffer_composite</a>);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#ab5f0f2465b820ba89404955dd822ac26">pp_buff_</a>-&gt;set_draw_colour_attachment(<a class="code" href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a09683270fc8785496b3d1d6423f18f77">pbuffer_composite</a>);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a901ae3acb341793861c91c306402b0d6">f_buff_</a>-&gt;blit_to(<a class="code" href="classmkr_1_1graphics__renderer.html#ab5f0f2465b820ba89404955dd822ac26">pp_buff_</a>.get(), <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, 0, 0, 1920, 1080, 0, 0, 1920, 1080);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#ab5f0f2465b820ba89404955dd822ac26">pp_buff_</a>-&gt;set_draw_colour_attachment_all();</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="comment">// Bind textures.</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a901ae3acb341793861c91c306402b0d6">f_buff_</a>-&gt;get_colour_attachment(<a class="code" href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a7250f587684f1009f64edc865a4c9a96">fbuffer_position</a>)-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1ab5e15f29cadab8f1f8081341bff5f3f0">texture_unit::texture_frag_position</a>);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a901ae3acb341793861c91c306402b0d6">f_buff_</a>-&gt;get_colour_attachment(<a class="code" href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a45c175a7e6bf988cc096e96b6e28d317">fbuffer_normal</a>)-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a95f748d4b1ef941454f52af4ecee820b">texture_unit::texture_frag_normal</a>);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#ab5f0f2465b820ba89404955dd822ac26">pp_buff_</a>-&gt;get_colour_attachment(<a class="code" href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a09683270fc8785496b3d1d6423f18f77">pbuffer_composite</a>)-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1aed244b158e2663c712a3bffe60427194">texture_unit::texture_composite</a>);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a901ae3acb341793861c91c306402b0d6">f_buff_</a>-&gt;get_depth_stencil_attachment()-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a8d0729a76366b9369a2eea61fb64cefe">texture_unit::texture_depth_stencil</a>);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="comment">// Bind mesh.</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a5a1d94db42b966794e8177cdf2515c48">screen_quad_</a>-&gt;bind();</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a5a1d94db42b966794e8177cdf2515c48">screen_quad_</a>-&gt;set_instance_data({{matrix4x4::identity(), matrix3x3::identity()}});</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="comment">// Use shader.</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> shader : <a class="code" href="classmkr_1_1material.html#ab7dda89afb9f70c97ad6ed4954e559d9">material::post_proc_shaders_</a>) {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            <a class="code" href="classmkr_1_1graphics__renderer.html#ab5f0f2465b820ba89404955dd822ac26">pp_buff_</a>-&gt;get_colour_attachment(<a class="code" href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a09683270fc8785496b3d1d6423f18f77">pbuffer_composite</a>)-&gt;bind(<a class="code" href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1aed244b158e2663c712a3bffe60427194">texture_unit::texture_composite</a>);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <a class="code" href="classmkr_1_1graphics__renderer.html#ab5f0f2465b820ba89404955dd822ac26">pp_buff_</a>-&gt;swap_buffers();</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            shader-&gt;use();</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            shader-&gt;set_uniform(post_proc_shader::uniform::u_near, _near);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            shader-&gt;set_uniform(post_proc_shader::uniform::u_far, _far);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            shader-&gt;set_uniform(post_proc_shader::uniform::u_bottom_left, vector2::zero);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            shader-&gt;set_uniform(post_proc_shader::uniform::u_top_right, vector2{1920.0f, 1080.0f});</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            glDrawElementsInstanced(GL_TRIANGLES, <a class="code" href="classmkr_1_1graphics__renderer.html#a5a1d94db42b966794e8177cdf2515c48">screen_quad_</a>-&gt;num_indices(), GL_UNSIGNED_INT, 0, 1);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno"><a class="line" href="classmkr_1_1graphics__renderer.html#aa286b25bfbff8d5a21670ddff1807350">  435</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmkr_1_1graphics__renderer.html#aa286b25bfbff8d5a21670ddff1807350">graphics_renderer::submit_camera</a>(<span class="keyword">const</span> <a class="code" href="structmkr_1_1local__to__world.html">local_to_world</a>&amp; _transform, <span class="keyword">const</span> <a class="code" href="structmkr_1_1camera.html">camera</a>&amp; _camera) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#a4ef270cde6f2290dc4fb80ebaa82a0bf">cameras_</a>.push({_transform, _camera});</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno"><a class="line" href="classmkr_1_1graphics__renderer.html#a626e372cdb3341435d730b68543f128f">  439</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmkr_1_1graphics__renderer.html#a626e372cdb3341435d730b68543f128f">graphics_renderer::submit_light</a>(<span class="keyword">const</span> <a class="code" href="structmkr_1_1local__to__world.html">local_to_world</a>&amp; _transform, <span class="keyword">const</span> <a class="code" href="classmkr_1_1light.html">light</a>&amp; _light) {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <a class="code" href="classmkr_1_1graphics__renderer.html#abb759c34beb9aaecf69842a174b64ad0">lights_</a>.push_back({_transform, _light});</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno"><a class="line" href="classmkr_1_1graphics__renderer.html#a18eeced7e3c8922e1bac6c0bac1f6e64">  443</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classmkr_1_1graphics__renderer.html#a18eeced7e3c8922e1bac6c0bac1f6e64">graphics_renderer::submit_mesh</a>(<span class="keyword">const</span> <a class="code" href="structmkr_1_1local__to__world.html">local_to_world</a>&amp; _transform, <span class="keyword">const</span> <a class="code" href="structmkr_1_1render__mesh.html">render_mesh</a>&amp; _render_mesh) {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="keywordflow">if</span> (_render_mesh.<a class="code" href="structmkr_1_1render__mesh.html#a3dd72b49f1dd57fbe307bbddc359b894">material_</a> == <span class="keyword">nullptr</span> || _render_mesh.<a class="code" href="structmkr_1_1render__mesh.html#ab9d1be0feeb50be2713631c91cadc5ee">mesh_</a> == <span class="keyword">nullptr</span>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">switch</span> (_render_mesh.<a class="code" href="structmkr_1_1render__mesh.html#a3dd72b49f1dd57fbe307bbddc359b894">material_</a>-&gt;<a class="code" href="classmkr_1_1material.html#a847de8f959a0377a722a53812cae7f17">render_path_</a>) {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespacemkr.html#ad08e11457fb92a01b7c2ed043292f8b9a43fff3df3fc0b3417c86dc3040fb2d86">render_path::deferred</a>:</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                <span class="comment">// if (material::geometry_shader_ &amp;&amp; material::light_shader_) {}</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                <a class="code" href="classmkr_1_1graphics__renderer.html#a43a2edd7a4f1420853e119ca87e3c084">deferred_meshes_</a>[_render_mesh.<a class="code" href="structmkr_1_1render__mesh.html#a3dd72b49f1dd57fbe307bbddc359b894">material_</a>][_render_mesh.<a class="code" href="structmkr_1_1render__mesh.html#ab9d1be0feeb50be2713631c91cadc5ee">mesh_</a>].push_back(_transform.<a class="code" href="structmkr_1_1local__to__world.html#a926202c619f33ca9ca9660b6ffb60174">transform_</a>);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespacemkr.html#ad08e11457fb92a01b7c2ed043292f8b9a445a1f1aa88f7a83a9a0fd6005cc6443">render_path::forward_opaque</a>:</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                <span class="comment">// if (_render_mesh.material_-&gt;forward_shader_) {}</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                <a class="code" href="classmkr_1_1graphics__renderer.html#a12e53247802cae5ebf814f6e2662c00c">forward_opaque_meshes_</a>[_render_mesh.<a class="code" href="structmkr_1_1render__mesh.html#a3dd72b49f1dd57fbe307bbddc359b894">material_</a>][_render_mesh.<a class="code" href="structmkr_1_1render__mesh.html#ab9d1be0feeb50be2713631c91cadc5ee">mesh_</a>].push_back(_transform.<a class="code" href="structmkr_1_1local__to__world.html#a926202c619f33ca9ca9660b6ffb60174">transform_</a>);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespacemkr.html#ad08e11457fb92a01b7c2ed043292f8b9af69a14b1595eb8db7ddef8b7bb3f4609">render_path::forward_transparent</a>:</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                <span class="comment">// if (_render_mesh.material_-&gt;forward_shader_) {}</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                <a class="code" href="classmkr_1_1graphics__renderer.html#a8533752d862c4729451ef8bd9807c525">forward_transparent_meshes_</a>[_render_mesh.<a class="code" href="structmkr_1_1render__mesh.html#a3dd72b49f1dd57fbe307bbddc359b894">material_</a>][_render_mesh.<a class="code" href="structmkr_1_1render__mesh.html#ab9d1be0feeb50be2713631c91cadc5ee">mesh_</a>].push_back(_transform.<a class="code" href="structmkr_1_1local__to__world.html#a926202c619f33ca9ca9660b6ffb60174">transform_</a>);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;} <span class="comment">// mkr</span></div>
<div class="ttc" id="aasset__loader_8h_html"><div class="ttname"><a href="asset__loader_8h.html">asset_loader.h</a></div></div>
<div class="ttc" id="aclassmkr_1_1forward__shader_html_a2231c6c49254df374d3247ea38d2fd86"><div class="ttname"><a href="classmkr_1_1forward__shader.html#a2231c6c49254df374d3247ea38d2fd86">mkr::forward_shader::max_lights</a></div><div class="ttdeci">static constexpr uint32_t max_lights</div><div class="ttdef"><b>Definition:</b> <a href="forward__shader_8h_source.html#l00008">forward_shader.h:8</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_a12b13a3af206a9d6ef1c3aed35910b0b"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#a12b13a3af206a9d6ef1c3aed35910b0b">mkr::graphics_renderer::start</a></div><div class="ttdeci">void start()</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8cpp_source.html#l00056">graphics_renderer.cpp:56</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_a12e53247802cae5ebf814f6e2662c00c"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#a12e53247802cae5ebf814f6e2662c00c">mkr::graphics_renderer::forward_opaque_meshes_</a></div><div class="ttdeci">std::unordered_map&lt; material *, std::unordered_map&lt; mesh *, std::vector&lt; matrix4x4 &gt; &gt; &gt; forward_opaque_meshes_</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8h_source.html#l00070">graphics_renderer.h:70</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_a18eeced7e3c8922e1bac6c0bac1f6e64"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#a18eeced7e3c8922e1bac6c0bac1f6e64">mkr::graphics_renderer::submit_mesh</a></div><div class="ttdeci">void submit_mesh(const local_to_world &amp;_transform, const render_mesh &amp;_render_mesh)</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8cpp_source.html#l00443">graphics_renderer.cpp:443</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_a30cf0344b06a8fa815ca7599dd9c04c8"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#a30cf0344b06a8fa815ca7599dd9c04c8">mkr::graphics_renderer::l_buff_</a></div><div class="ttdeci">std::unique_ptr&lt; light_buffer &gt; l_buff_</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8h_source.html#l00053">graphics_renderer.h:53</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_a434e6d0aa77db02218b1194438804022"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#a434e6d0aa77db02218b1194438804022">mkr::graphics_renderer::s_buff_</a></div><div class="ttdeci">std::unique_ptr&lt; shadow_buffer &gt; s_buff_</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8h_source.html#l00056">graphics_renderer.h:56</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_a43a2edd7a4f1420853e119ca87e3c084"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#a43a2edd7a4f1420853e119ca87e3c084">mkr::graphics_renderer::deferred_meshes_</a></div><div class="ttdeci">std::unordered_map&lt; material *, std::unordered_map&lt; mesh *, std::vector&lt; matrix4x4 &gt; &gt; &gt; deferred_meshes_</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8h_source.html#l00069">graphics_renderer.h:69</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_a45bd8744927b027b02c65dfe28a5aff3"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#a45bd8744927b027b02c65dfe28a5aff3">mkr::graphics_renderer::update</a></div><div class="ttdeci">void update()</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8cpp_source.html#l00076">graphics_renderer.cpp:76</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_a4ef270cde6f2290dc4fb80ebaa82a0bf"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#a4ef270cde6f2290dc4fb80ebaa82a0bf">mkr::graphics_renderer::cameras_</a></div><div class="ttdeci">std::priority_queue&lt; camera_data &gt; cameras_</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8h_source.html#l00063">graphics_renderer.h:63</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_a50b03b55fb625d4f702b45e07aa43c1a"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#a50b03b55fb625d4f702b45e07aa43c1a">mkr::graphics_renderer::init</a></div><div class="ttdeci">void init()</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8cpp_source.html#l00014">graphics_renderer.cpp:14</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_a5a1d94db42b966794e8177cdf2515c48"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#a5a1d94db42b966794e8177cdf2515c48">mkr::graphics_renderer::screen_quad_</a></div><div class="ttdeci">std::unique_ptr&lt; mesh &gt; screen_quad_</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8h_source.html#l00059">graphics_renderer.h:59</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_a626e372cdb3341435d730b68543f128f"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#a626e372cdb3341435d730b68543f128f">mkr::graphics_renderer::submit_light</a></div><div class="ttdeci">void submit_light(const local_to_world &amp;_transform, const light &amp;_light)</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8cpp_source.html#l00439">graphics_renderer.cpp:439</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_a63551283a98ea0db2ad282cbf4490bb0"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#a63551283a98ea0db2ad282cbf4490bb0">mkr::graphics_renderer::light_pass</a></div><div class="ttdeci">void light_pass(const matrix4x4 &amp;_view_matrix, const vector3 &amp;_view_forward, const vector3 &amp;_view_up, const vector3 &amp;_view_right)</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8cpp_source.html#l00198">graphics_renderer.cpp:198</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_a8533752d862c4729451ef8bd9807c525"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#a8533752d862c4729451ef8bd9807c525">mkr::graphics_renderer::forward_transparent_meshes_</a></div><div class="ttdeci">std::unordered_map&lt; material *, std::unordered_map&lt; mesh *, std::vector&lt; matrix4x4 &gt; &gt; &gt; forward_transparent_meshes_</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8h_source.html#l00071">graphics_renderer.h:71</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_a88efe9107656cd7385690e76236a6c4c"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#a88efe9107656cd7385690e76236a6c4c">mkr::graphics_renderer::skybox_mesh_</a></div><div class="ttdeci">std::unique_ptr&lt; mesh &gt; skybox_mesh_</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8h_source.html#l00060">graphics_renderer.h:60</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_a901ae3acb341793861c91c306402b0d6"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#a901ae3acb341793861c91c306402b0d6">mkr::graphics_renderer::f_buff_</a></div><div class="ttdeci">std::unique_ptr&lt; forward_buffer &gt; f_buff_</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8h_source.html#l00054">graphics_renderer.h:54</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_a99ec397776d7d22c2ad225d9c73e5e98"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#a99ec397776d7d22c2ad225d9c73e5e98">mkr::graphics_renderer::exit</a></div><div class="ttdeci">void exit()</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8cpp_source.html#l00088">graphics_renderer.cpp:88</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_a9bfd2cde07bcbf5414359b7411fb66de"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#a9bfd2cde07bcbf5414359b7411fb66de">mkr::graphics_renderer::render</a></div><div class="ttdeci">void render()</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8cpp_source.html#l00092">graphics_renderer.cpp:92</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_aa286b25bfbff8d5a21670ddff1807350"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#aa286b25bfbff8d5a21670ddff1807350">mkr::graphics_renderer::submit_camera</a></div><div class="ttdeci">void submit_camera(const local_to_world &amp;_transform, const camera &amp;_camera)</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8cpp_source.html#l00435">graphics_renderer.cpp:435</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_aa579acfaef95fa81df495dfa3aad5973"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#aa579acfaef95fa81df495dfa3aad5973">mkr::graphics_renderer::post_proc_pass</a></div><div class="ttdeci">void post_proc_pass(float _near, float _far)</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8cpp_source.html#l00397">graphics_renderer.cpp:397</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_aab27889f37c8c7661c5ade22f1b88e0b"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#aab27889f37c8c7661c5ade22f1b88e0b">mkr::graphics_renderer::geometry_pass</a></div><div class="ttdeci">void geometry_pass(const matrix4x4 &amp;_view_matrix, const matrix4x4 &amp;_projection_matrix)</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8cpp_source.html#l00132">graphics_renderer.cpp:132</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_ab5f0f2465b820ba89404955dd822ac26"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#ab5f0f2465b820ba89404955dd822ac26">mkr::graphics_renderer::pp_buff_</a></div><div class="ttdeci">std::unique_ptr&lt; post_proc_buffer &gt; pp_buff_</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8h_source.html#l00055">graphics_renderer.h:55</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_abb759c34beb9aaecf69842a174b64ad0"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#abb759c34beb9aaecf69842a174b64ad0">mkr::graphics_renderer::lights_</a></div><div class="ttdeci">std::vector&lt; light_data &gt; lights_</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8h_source.html#l00066">graphics_renderer.h:66</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_abbcbdce247815fedf2ee671e88192a34"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#abbcbdce247815fedf2ee671e88192a34">mkr::graphics_renderer::window_width_</a></div><div class="ttdeci">uint32_t window_width_</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8h_source.html#l00047">graphics_renderer.h:47</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_acf67a94cf4cf50424ca00617e4f63972"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#acf67a94cf4cf50424ca00617e4f63972">mkr::graphics_renderer::d_buff_</a></div><div class="ttdeci">std::unique_ptr&lt; default_buffer &gt; d_buff_</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8h_source.html#l00051">graphics_renderer.h:51</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_ad8e80c6c3a0fd1a804208f41c32b51f5"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#ad8e80c6c3a0fd1a804208f41c32b51f5">mkr::graphics_renderer::app_window_</a></div><div class="ttdeci">std::unique_ptr&lt; app_window &gt; app_window_</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8h_source.html#l00046">graphics_renderer.h:46</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_ada5827840cc4636b061d20e144a5f806"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#ada5827840cc4636b061d20e144a5f806">mkr::graphics_renderer::forward_pass</a></div><div class="ttdeci">void forward_pass(const matrix4x4 &amp;_view_matrix, const matrix4x4 &amp;_projection_matrix, const vector3 &amp;_view_forward, const vector3 &amp;_view_up, const vector3 &amp;_view_right, const skybox &amp;_skybox)</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8cpp_source.html#l00265">graphics_renderer.cpp:265</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_aea08e104db3efd807eb0a72f17fd7082"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#aea08e104db3efd807eb0a72f17fd7082">mkr::graphics_renderer::window_height_</a></div><div class="ttdeci">uint32_t window_height_</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8h_source.html#l00048">graphics_renderer.h:48</a></div></div>
<div class="ttc" id="aclassmkr_1_1graphics__renderer_html_afa7c11f1aedc94b816a01e5ed5affeb2"><div class="ttname"><a href="classmkr_1_1graphics__renderer.html#afa7c11f1aedc94b816a01e5ed5affeb2">mkr::graphics_renderer::g_buff_</a></div><div class="ttdeci">std::unique_ptr&lt; geometry_buffer &gt; g_buff_</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8h_source.html#l00052">graphics_renderer.h:52</a></div></div>
<div class="ttc" id="aclassmkr_1_1light__shader_html_a4a046dee57a8f755df8c93f3be82d997"><div class="ttname"><a href="classmkr_1_1light__shader.html#a4a046dee57a8f755df8c93f3be82d997">mkr::light_shader::max_lights</a></div><div class="ttdeci">static constexpr uint32_t max_lights</div><div class="ttdef"><b>Definition:</b> <a href="light__shader_8h_source.html#l00008">light_shader.h:8</a></div></div>
<div class="ttc" id="aclassmkr_1_1light_html"><div class="ttname"><a href="classmkr_1_1light.html">mkr::light</a></div><div class="ttdef"><b>Definition:</b> <a href="light_8h_source.html#l00013">light.h:13</a></div></div>
<div class="ttc" id="aclassmkr_1_1lighting_html_a05fdf0bf39258c6d1bde9dde1d3a145d"><div class="ttname"><a href="classmkr_1_1lighting.html#a05fdf0bf39258c6d1bde9dde1d3a145d">mkr::lighting::ambient_light_</a></div><div class="ttdeci">static colour ambient_light_</div><div class="ttdef"><b>Definition:</b> <a href="lighting_8h_source.html#l00010">lighting.h:10</a></div></div>
<div class="ttc" id="aclassmkr_1_1material_html_a61d1dd0c97915c693a1c1a284b748060"><div class="ttname"><a href="classmkr_1_1material.html#a61d1dd0c97915c693a1c1a284b748060">mkr::material::light_shader_</a></div><div class="ttdeci">static shader_program * light_shader_</div><div class="ttdef"><b>Definition:</b> <a href="material_8h_source.html#l00018">material.h:18</a></div></div>
<div class="ttc" id="aclassmkr_1_1material_html_a847de8f959a0377a722a53812cae7f17"><div class="ttname"><a href="classmkr_1_1material.html#a847de8f959a0377a722a53812cae7f17">mkr::material::render_path_</a></div><div class="ttdeci">render_path render_path_</div><div class="ttdef"><b>Definition:</b> <a href="material_8h_source.html#l00015">material.h:15</a></div></div>
<div class="ttc" id="aclassmkr_1_1material_html_ab7dda89afb9f70c97ad6ed4954e559d9"><div class="ttname"><a href="classmkr_1_1material.html#ab7dda89afb9f70c97ad6ed4954e559d9">mkr::material::post_proc_shaders_</a></div><div class="ttdeci">static std::vector&lt; shader_program * &gt; post_proc_shaders_</div><div class="ttdef"><b>Definition:</b> <a href="material_8h_source.html#l00019">material.h:19</a></div></div>
<div class="ttc" id="aclassmkr_1_1material_html_ad2f7bdd6e381175da6aca200fb726c14"><div class="ttname"><a href="classmkr_1_1material.html#ad2f7bdd6e381175da6aca200fb726c14">mkr::material::geometry_shader_</a></div><div class="ttdeci">static shader_program * geometry_shader_</div><div class="ttdef"><b>Definition:</b> <a href="material_8h_source.html#l00017">material.h:17</a></div></div>
<div class="ttc" id="aclassmkr_1_1shader__program_html_a18a3c6a606085de30f6c31806e47fac6"><div class="ttname"><a href="classmkr_1_1shader__program.html#a18a3c6a606085de30f6c31806e47fac6">mkr::shader_program::set_uniform</a></div><div class="ttdeci">void set_uniform(const std::string &amp;_uniform_name, float _value0)</div><div class="ttdef"><b>Definition:</b> <a href="shader__program_8cpp_source.html#l00116">shader_program.cpp:116</a></div></div>
<div class="ttc" id="aclassmkr_1_1shader__program_html_a718cfdf922d5d469812bbff3a4738221"><div class="ttname"><a href="classmkr_1_1shader__program.html#a718cfdf922d5d469812bbff3a4738221">mkr::shader_program::use</a></div><div class="ttdeci">void use()</div><div class="ttdef"><b>Definition:</b> <a href="shader__program_8cpp_source.html#l00111">shader_program.cpp:111</a></div></div>
<div class="ttc" id="aclassmkr_1_1skybox_html"><div class="ttname"><a href="classmkr_1_1skybox.html">mkr::skybox</a></div><div class="ttdef"><b>Definition:</b> <a href="skybox_8h_source.html#l00009">skybox.h:9</a></div></div>
<div class="ttc" id="aclassmkr_1_1skybox_html_a0f3f77ded1dacf0a0f6e116c9ce08a9d"><div class="ttname"><a href="classmkr_1_1skybox.html#a0f3f77ded1dacf0a0f6e116c9ce08a9d">mkr::skybox::colour_</a></div><div class="ttdeci">colour colour_</div><div class="ttdef"><b>Definition:</b> <a href="skybox_8h_source.html#l00013">skybox.h:13</a></div></div>
<div class="ttc" id="aclassmkr_1_1skybox_html_a1000d3b9dd0012fc18c6f0ea77c07dde"><div class="ttname"><a href="classmkr_1_1skybox.html#a1000d3b9dd0012fc18c6f0ea77c07dde">mkr::skybox::shader_</a></div><div class="ttdeci">shader_program * shader_</div><div class="ttdef"><b>Definition:</b> <a href="skybox_8h_source.html#l00012">skybox.h:12</a></div></div>
<div class="ttc" id="aclassmkr_1_1skybox_html_aace00fd4d01a90c747f0962fba8a2195"><div class="ttname"><a href="classmkr_1_1skybox.html#aace00fd4d01a90c747f0962fba8a2195">mkr::skybox::texture_</a></div><div class="ttdeci">texture_cube * texture_</div><div class="ttdef"><b>Definition:</b> <a href="skybox_8h_source.html#l00011">skybox.h:11</a></div></div>
<div class="ttc" id="aclassmkr_1_1texture_html_a5e23fdd61c8a395729f86e2d8a7660e5"><div class="ttname"><a href="classmkr_1_1texture.html#a5e23fdd61c8a395729f86e2d8a7660e5">mkr::texture::bind</a></div><div class="ttdeci">void bind(texture_unit _texture_unit)</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00100">texture.h:100</a></div></div>
<div class="ttc" id="aforward__shader_8h_html"><div class="ttname"><a href="forward__shader_8h.html">forward_shader.h</a></div></div>
<div class="ttc" id="ageometry__shader_8h_html"><div class="ttname"><a href="geometry__shader_8h.html">geometry_shader.h</a></div></div>
<div class="ttc" id="agraphics__renderer_8h_html"><div class="ttname"><a href="graphics__renderer_8h.html">graphics_renderer.h</a></div></div>
<div class="ttc" id="alight__shader_8h_html"><div class="ttname"><a href="light__shader_8h.html">light_shader.h</a></div></div>
<div class="ttc" id="alighting_8h_html"><div class="ttname"><a href="lighting_8h.html">lighting.h</a></div></div>
<div class="ttc" id="anamespacemkr_html"><div class="ttname"><a href="namespacemkr.html">mkr</a></div><div class="ttdef"><b>Definition:</b> <a href="application_8cpp_source.html#l00010">application.cpp:10</a></div></div>
<div class="ttc" id="anamespacemkr_html_a1af81b2d0e3cf9b89ab132aaeea299e2ac8985da789fcecc895354b4bcc89eb79"><div class="ttname"><a href="namespacemkr.html#a1af81b2d0e3cf9b89ab132aaeea299e2ac8985da789fcecc895354b4bcc89eb79">mkr::stencil_opaque</a></div><div class="ttdeci">@ stencil_opaque</div><div class="ttdef"><b>Definition:</b> <a href="graphics__renderer_8h_source.html#l00027">graphics_renderer.h:27</a></div></div>
<div class="ttc" id="anamespacemkr_html_a471d6f34c7920d511bb4f2ead488f0a4a09683270fc8785496b3d1d6423f18f77"><div class="ttname"><a href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a09683270fc8785496b3d1d6423f18f77">mkr::pbuffer_composite</a></div><div class="ttdeci">@ pbuffer_composite</div><div class="ttdef"><b>Definition:</b> <a href="framebuffer_8h_source.html#l00029">framebuffer.h:29</a></div></div>
<div class="ttc" id="anamespacemkr_html_a471d6f34c7920d511bb4f2ead488f0a4a1c4a3e09a2fbb083b89cd4df68451647"><div class="ttname"><a href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a1c4a3e09a2fbb083b89cd4df68451647">mkr::gbuffer_specular</a></div><div class="ttdeci">@ gbuffer_specular</div><div class="ttdef"><b>Definition:</b> <a href="framebuffer_8h_source.html#l00015">framebuffer.h:15</a></div></div>
<div class="ttc" id="anamespacemkr_html_a471d6f34c7920d511bb4f2ead488f0a4a45c175a7e6bf988cc096e96b6e28d317"><div class="ttname"><a href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a45c175a7e6bf988cc096e96b6e28d317">mkr::fbuffer_normal</a></div><div class="ttdeci">@ fbuffer_normal</div><div class="ttdef"><b>Definition:</b> <a href="framebuffer_8h_source.html#l00026">framebuffer.h:26</a></div></div>
<div class="ttc" id="anamespacemkr_html_a471d6f34c7920d511bb4f2ead488f0a4a4cf52d184d8b5a75dfadfe36bbfb2b0f"><div class="ttname"><a href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a4cf52d184d8b5a75dfadfe36bbfb2b0f">mkr::lbuffer_composite</a></div><div class="ttdeci">@ lbuffer_composite</div><div class="ttdef"><b>Definition:</b> <a href="framebuffer_8h_source.html#l00019">framebuffer.h:19</a></div></div>
<div class="ttc" id="anamespacemkr_html_a471d6f34c7920d511bb4f2ead488f0a4a6b3cd312d927939d390e646d921c65b9"><div class="ttname"><a href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a6b3cd312d927939d390e646d921c65b9">mkr::gbuffer_gloss</a></div><div class="ttdeci">@ gbuffer_gloss</div><div class="ttdef"><b>Definition:</b> <a href="framebuffer_8h_source.html#l00016">framebuffer.h:16</a></div></div>
<div class="ttc" id="anamespacemkr_html_a471d6f34c7920d511bb4f2ead488f0a4a6fda5fa8094b5bc80468b6dc3754498d"><div class="ttname"><a href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a6fda5fa8094b5bc80468b6dc3754498d">mkr::lbuffer_specular</a></div><div class="ttdeci">@ lbuffer_specular</div><div class="ttdef"><b>Definition:</b> <a href="framebuffer_8h_source.html#l00021">framebuffer.h:21</a></div></div>
<div class="ttc" id="anamespacemkr_html_a471d6f34c7920d511bb4f2ead488f0a4a7250f587684f1009f64edc865a4c9a96"><div class="ttname"><a href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a7250f587684f1009f64edc865a4c9a96">mkr::fbuffer_position</a></div><div class="ttdeci">@ fbuffer_position</div><div class="ttdef"><b>Definition:</b> <a href="framebuffer_8h_source.html#l00025">framebuffer.h:25</a></div></div>
<div class="ttc" id="anamespacemkr_html_a471d6f34c7920d511bb4f2ead488f0a4a7cd7b2bad72491e5c847abe7f734acc5"><div class="ttname"><a href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a7cd7b2bad72491e5c847abe7f734acc5">mkr::lbuffer_diffuse</a></div><div class="ttdeci">@ lbuffer_diffuse</div><div class="ttdef"><b>Definition:</b> <a href="framebuffer_8h_source.html#l00020">framebuffer.h:20</a></div></div>
<div class="ttc" id="anamespacemkr_html_a471d6f34c7920d511bb4f2ead488f0a4a83d07773d38cd79b12eb3e2d1c621463"><div class="ttname"><a href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4a83d07773d38cd79b12eb3e2d1c621463">mkr::gbuffer_position</a></div><div class="ttdeci">@ gbuffer_position</div><div class="ttdef"><b>Definition:</b> <a href="framebuffer_8h_source.html#l00012">framebuffer.h:12</a></div></div>
<div class="ttc" id="anamespacemkr_html_a471d6f34c7920d511bb4f2ead488f0a4aa42debe4b00837d3a71b6bc6876ec708"><div class="ttname"><a href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4aa42debe4b00837d3a71b6bc6876ec708">mkr::gbuffer_normal</a></div><div class="ttdeci">@ gbuffer_normal</div><div class="ttdef"><b>Definition:</b> <a href="framebuffer_8h_source.html#l00013">framebuffer.h:13</a></div></div>
<div class="ttc" id="anamespacemkr_html_a471d6f34c7920d511bb4f2ead488f0a4aa550835bf5853b4f95b6845f880df643"><div class="ttname"><a href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4aa550835bf5853b4f95b6845f880df643">mkr::fbuffer_composite</a></div><div class="ttdeci">@ fbuffer_composite</div><div class="ttdef"><b>Definition:</b> <a href="framebuffer_8h_source.html#l00024">framebuffer.h:24</a></div></div>
<div class="ttc" id="anamespacemkr_html_a471d6f34c7920d511bb4f2ead488f0a4ab7026ff7791b1f055d69425ec3395b83"><div class="ttname"><a href="namespacemkr.html#a471d6f34c7920d511bb4f2ead488f0a4ab7026ff7791b1f055d69425ec3395b83">mkr::gbuffer_albedo</a></div><div class="ttdeci">@ gbuffer_albedo</div><div class="ttdef"><b>Definition:</b> <a href="framebuffer_8h_source.html#l00014">framebuffer.h:14</a></div></div>
<div class="ttc" id="anamespacemkr_html_a74772d000a9dee6b4f8f94fc45e9d5e1a279c221a440a6e199736a992a2e13873"><div class="ttname"><a href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a279c221a440a6e199736a992a2e13873">mkr::texture_diffuse</a></div><div class="ttdeci">@ texture_diffuse</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00014">texture.h:14</a></div></div>
<div class="ttc" id="anamespacemkr_html_a74772d000a9dee6b4f8f94fc45e9d5e1a28836e1906c467f91fe721f876196f79"><div class="ttname"><a href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a28836e1906c467f91fe721f876196f79">mkr::texture_gloss</a></div><div class="ttdeci">@ texture_gloss</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00017">texture.h:17</a></div></div>
<div class="ttc" id="anamespacemkr_html_a74772d000a9dee6b4f8f94fc45e9d5e1a2e6f41bb29037dc80504b943a03a37f5"><div class="ttname"><a href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a2e6f41bb29037dc80504b943a03a37f5">mkr::texture_normal</a></div><div class="ttdeci">@ texture_normal</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00015">texture.h:15</a></div></div>
<div class="ttc" id="anamespacemkr_html_a74772d000a9dee6b4f8f94fc45e9d5e1a31365efb3f17ef94ebed82d6d78d235c"><div class="ttname"><a href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a31365efb3f17ef94ebed82d6d78d235c">mkr::texture_frag_gloss</a></div><div class="ttdeci">@ texture_frag_gloss</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00024">texture.h:24</a></div></div>
<div class="ttc" id="anamespacemkr_html_a74772d000a9dee6b4f8f94fc45e9d5e1a375ec01642107a6178872e8055cc66ad"><div class="ttname"><a href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a375ec01642107a6178872e8055cc66ad">mkr::texture_light_specular</a></div><div class="ttdeci">@ texture_light_specular</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00026">texture.h:26</a></div></div>
<div class="ttc" id="anamespacemkr_html_a74772d000a9dee6b4f8f94fc45e9d5e1a3e73636b1d3567f3e4554e27f48c2e4c"><div class="ttname"><a href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a3e73636b1d3567f3e4554e27f48c2e4c">mkr::texture_skybox</a></div><div class="ttdeci">@ texture_skybox</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00012">texture.h:12</a></div></div>
<div class="ttc" id="anamespacemkr_html_a74772d000a9dee6b4f8f94fc45e9d5e1a713a31f5dc6be65e75247060dc49742e"><div class="ttname"><a href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a713a31f5dc6be65e75247060dc49742e">mkr::texture_displacement</a></div><div class="ttdeci">@ texture_displacement</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00018">texture.h:18</a></div></div>
<div class="ttc" id="anamespacemkr_html_a74772d000a9dee6b4f8f94fc45e9d5e1a77f77f76d87adf102db0c97761a32f89"><div class="ttname"><a href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a77f77f76d87adf102db0c97761a32f89">mkr::texture_specular</a></div><div class="ttdeci">@ texture_specular</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00016">texture.h:16</a></div></div>
<div class="ttc" id="anamespacemkr_html_a74772d000a9dee6b4f8f94fc45e9d5e1a78ab070005550fa9389ab539d705e8e6"><div class="ttname"><a href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a78ab070005550fa9389ab539d705e8e6">mkr::texture_frag_specular</a></div><div class="ttdeci">@ texture_frag_specular</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00023">texture.h:23</a></div></div>
<div class="ttc" id="anamespacemkr_html_a74772d000a9dee6b4f8f94fc45e9d5e1a8d0729a76366b9369a2eea61fb64cefe"><div class="ttname"><a href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a8d0729a76366b9369a2eea61fb64cefe">mkr::texture_depth_stencil</a></div><div class="ttdeci">@ texture_depth_stencil</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00029">texture.h:29</a></div></div>
<div class="ttc" id="anamespacemkr_html_a74772d000a9dee6b4f8f94fc45e9d5e1a95f748d4b1ef941454f52af4ecee820b"><div class="ttname"><a href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a95f748d4b1ef941454f52af4ecee820b">mkr::texture_frag_normal</a></div><div class="ttdeci">@ texture_frag_normal</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00021">texture.h:21</a></div></div>
<div class="ttc" id="anamespacemkr_html_a74772d000a9dee6b4f8f94fc45e9d5e1a9bf1291d9a8e08e853c51eb192817f86"><div class="ttname"><a href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1a9bf1291d9a8e08e853c51eb192817f86">mkr::texture_light_diffuse</a></div><div class="ttdeci">@ texture_light_diffuse</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00025">texture.h:25</a></div></div>
<div class="ttc" id="anamespacemkr_html_a74772d000a9dee6b4f8f94fc45e9d5e1ab5e15f29cadab8f1f8081341bff5f3f0"><div class="ttname"><a href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1ab5e15f29cadab8f1f8081341bff5f3f0">mkr::texture_frag_position</a></div><div class="ttdeci">@ texture_frag_position</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00020">texture.h:20</a></div></div>
<div class="ttc" id="anamespacemkr_html_a74772d000a9dee6b4f8f94fc45e9d5e1aed244b158e2663c712a3bffe60427194"><div class="ttname"><a href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1aed244b158e2663c712a3bffe60427194">mkr::texture_composite</a></div><div class="ttdeci">@ texture_composite</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00028">texture.h:28</a></div></div>
<div class="ttc" id="anamespacemkr_html_a74772d000a9dee6b4f8f94fc45e9d5e1afe46177cc5a88a581cf68ce5317c7be2"><div class="ttname"><a href="namespacemkr.html#a74772d000a9dee6b4f8f94fc45e9d5e1afe46177cc5a88a581cf68ce5317c7be2">mkr::texture_frag_diffuse</a></div><div class="ttdeci">@ texture_frag_diffuse</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00022">texture.h:22</a></div></div>
<div class="ttc" id="anamespacemkr_html_a9655959a225d822da5e035327fbdb9bdadea58969a0734fca7a7a962adeb02da3"><div class="ttname"><a href="namespacemkr.html#a9655959a225d822da5e035327fbdb9bdadea58969a0734fca7a7a962adeb02da3">mkr::none</a></div><div class="ttdeci">@ none</div><div class="ttdef"><b>Definition:</b> <a href="app__window_8h_source.html#l00009">app_window.h:9</a></div></div>
<div class="ttc" id="anamespacemkr_html_aac2a3034ca6bac134bc3f4f42a31e076a75c6a0985bbb6ec81d99cbb52ff86c1d"><div class="ttname"><a href="namespacemkr.html#aac2a3034ca6bac134bc3f4f42a31e076a75c6a0985bbb6ec81d99cbb52ff86c1d">mkr::perspective</a></div><div class="ttdeci">@ perspective</div><div class="ttdef"><b>Definition:</b> <a href="camera_8h_source.html#l00010">camera.h:10</a></div></div>
<div class="ttc" id="anamespacemkr_html_ad08e11457fb92a01b7c2ed043292f8b9a43fff3df3fc0b3417c86dc3040fb2d86"><div class="ttname"><a href="namespacemkr.html#ad08e11457fb92a01b7c2ed043292f8b9a43fff3df3fc0b3417c86dc3040fb2d86">mkr::render_path::deferred</a></div><div class="ttdeci">@ deferred</div></div>
<div class="ttc" id="anamespacemkr_html_ad08e11457fb92a01b7c2ed043292f8b9a445a1f1aa88f7a83a9a0fd6005cc6443"><div class="ttname"><a href="namespacemkr.html#ad08e11457fb92a01b7c2ed043292f8b9a445a1f1aa88f7a83a9a0fd6005cc6443">mkr::render_path::forward_opaque</a></div><div class="ttdeci">@ forward_opaque</div></div>
<div class="ttc" id="anamespacemkr_html_ad08e11457fb92a01b7c2ed043292f8b9af69a14b1595eb8db7ddef8b7bb3f4609"><div class="ttname"><a href="namespacemkr.html#ad08e11457fb92a01b7c2ed043292f8b9af69a14b1595eb8db7ddef8b7bb3f4609">mkr::render_path::forward_transparent</a></div><div class="ttdeci">@ forward_transparent</div></div>
<div class="ttc" id="apost__proc__shader_8h_html"><div class="ttname"><a href="post__proc__shader_8h.html">post_proc_shader.h</a></div></div>
<div class="ttc" id="askybox__shader_8h_html"><div class="ttname"><a href="skybox__shader_8h.html">skybox_shader.h</a></div></div>
<div class="ttc" id="astructmkr_1_1camera_html"><div class="ttname"><a href="structmkr_1_1camera.html">mkr::camera</a></div><div class="ttdef"><b>Definition:</b> <a href="camera_8h_source.html#l00025">camera.h:25</a></div></div>
<div class="ttc" id="astructmkr_1_1local__to__world_html"><div class="ttname"><a href="structmkr_1_1local__to__world.html">mkr::local_to_world</a></div><div class="ttdef"><b>Definition:</b> <a href="local__to__world_8h_source.html#l00008">local_to_world.h:8</a></div></div>
<div class="ttc" id="astructmkr_1_1local__to__world_html_a926202c619f33ca9ca9660b6ffb60174"><div class="ttname"><a href="structmkr_1_1local__to__world.html#a926202c619f33ca9ca9660b6ffb60174">mkr::local_to_world::transform_</a></div><div class="ttdeci">matrix4x4 transform_</div><div class="ttdef"><b>Definition:</b> <a href="local__to__world_8h_source.html#l00009">local_to_world.h:9</a></div></div>
<div class="ttc" id="astructmkr_1_1render__mesh_html"><div class="ttname"><a href="structmkr_1_1render__mesh.html">mkr::render_mesh</a></div><div class="ttdef"><b>Definition:</b> <a href="render__mesh_8h_source.html#l00009">render_mesh.h:9</a></div></div>
<div class="ttc" id="astructmkr_1_1render__mesh_html_a3dd72b49f1dd57fbe307bbddc359b894"><div class="ttname"><a href="structmkr_1_1render__mesh.html#a3dd72b49f1dd57fbe307bbddc359b894">mkr::render_mesh::material_</a></div><div class="ttdeci">material * material_</div><div class="ttdef"><b>Definition:</b> <a href="render__mesh_8h_source.html#l00010">render_mesh.h:10</a></div></div>
<div class="ttc" id="astructmkr_1_1render__mesh_html_ab9d1be0feeb50be2713631c91cadc5ee"><div class="ttname"><a href="structmkr_1_1render__mesh.html#ab9d1be0feeb50be2713631c91cadc5ee">mkr::render_mesh::mesh_</a></div><div class="ttdeci">mesh * mesh_</div><div class="ttdef"><b>Definition:</b> <a href="render__mesh_8h_source.html#l00011">render_mesh.h:11</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
